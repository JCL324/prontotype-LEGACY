Options +FollowSymLinks
RewriteEngine on

# if the file exists in the public directory, rewrite to point to it
RewriteCond %{DOCUMENT_ROOT}/public/$1 -f
RewriteRule ^(.*)$ /public/$1 [L]

# otherwise run everything else through index.php 
RewriteCond %{REQUEST_URI} !index.php
RewriteCond %{REQUEST_URI} !/public/(.*)
RewriteCond %{REQUEST_URI} !/system/(assets|_cache)/(.*)
RewriteCond %{DOCUMENT_ROOT}/public/$1 !-f
RewriteRule ^(.*)$ /index.php/$1 [L]
